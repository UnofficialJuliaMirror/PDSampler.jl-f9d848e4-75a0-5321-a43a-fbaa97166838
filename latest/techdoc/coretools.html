<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Core tools · PDMP.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/highlightjs/default.css" rel="stylesheet" type="text/css"/><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/partial.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PDMP.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Introduction</a></li><li><a class="toctext" href="../aboutpdmp.html">About PDMP</a></li><li><span class="toctext">Examples</span><ul><li><a class="toctext" href="../examples/ex_gbps1.html">Global BPS</a></li><li><a class="toctext" href="../examples/ex_lbps1.html">Local BPS</a></li></ul></li><li><span class="toctext">Technical Documentation</span><ul><li><a class="toctext" href="structure.html">Code structure</a></li><li class="current"><a class="toctext" href="coretools.html">Core tools</a><ul class="internal"><li><a class="toctext" href="#Geometry-1">Geometry</a></li><li><a class="toctext" href="#Sampling-from-an-IPP-1">Sampling from an IPP</a></li><li><a class="toctext" href="#Kernels-1">Kernels</a></li></ul></li><li><a class="toctext" href="models.html">Models</a></li><li><a class="toctext" href="global.html">Global sampler</a></li><li><a class="toctext" href="local.html">Local sampler</a></li><li><a class="toctext" href="types.html">Types</a></li></ul></li><li><span class="toctext">Contributing</span><ul><li><a class="toctext" href="../contributing/addingexample.html">New example</a></li><li><a class="toctext" href="../contributing/addingfeature.html">New feature</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Technical Documentation</li><li><a href="coretools.html">Core tools</a></li></ul><a class="edit-page" href="https://github.com/alan-turing-institute/PDMP.jl/tree/d6fa4ffb60d503c3eada6be5738b3ebd7a2c7170/docs/src/techdoc/coretools.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Core tools</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="td-coretools-1" href="#td-coretools-1">Core tools</a></h1><h2><a class="nav-anchor" id="Geometry-1" href="#Geometry-1">Geometry</a></h2><p>The <code>geometry.jl</code> code exports the following <strong>immutable</strong> types:</p><ul><li><p><code>Unconstrained &lt;: Domain</code>,</p></li><li><p><code>Polygonal &lt;: Domain</code>.</p></li></ul><p>and a function</p><ul><li><p><code>nextboundary</code></p></li></ul><p>Any geometry type needs to have a <code>nextboundary</code> function associated with it of the form <code>nextboundary(g, x, v)</code> where <code>g</code> refers to the geometry, <code>x</code> to the position and <code>v</code> to the velocity. The aim of that function is to:</p><ul><li><p>return a time of first hit <span>$\tau_h$</span> (following the ray <span>$x+vt$</span>, for <span>$t&gt;0$</span>),</p></li><li><p>return the normal to the boundary at that hitting point.</p></li></ul><p>So for example, the <code>Unconstrained</code> is an empty type and the associated <code>nextboundary</code> function just returns <code>(NaN, NaN)</code> indeed a boundary will never be crossed and there is no normal. These <code>NaN</code> are processed by calling functions.</p><p>The <code>Polygonal</code> domain requires the definition of the normals and the intercepts. The <code>nextboundary</code> function is pretty simple (intersection of lines). Note a few tricks for numerical stability:</p><ul><li><p>near parallel case can be ignored (the crossing time will be huge compared to bouncing time or refreshment time and therefore we can just ignore it)</p></li><li><p>negative times can be ignored (we&#39;re only going forward)</p></li><li><p>times that are very close to zero are ignored (means that we are currently already very close to the boundary meaning that we will bounce away)</p></li></ul><h2><a class="nav-anchor" id="Sampling-from-an-IPP-1" href="#Sampling-from-an-IPP-1">Sampling from an IPP</a></h2><p>The <code>ippsampler.jl</code> exports the following <strong>immutable</strong> types:</p><ul><li><p><code>NextEvent</code></p></li><li><p><code>LinearBound &lt;: Thinning &lt;: IPPSamplingMethod</code> </p></li></ul><h2><a class="nav-anchor" id="Kernels-1" href="#Kernels-1">Kernels</a></h2><footer><hr/><a class="previous" href="structure.html"><span class="direction">Previous</span><span class="title">Code structure</span></a><a class="next" href="models.html"><span class="direction">Next</span><span class="title">Models</span></a></footer></article></body></html>
